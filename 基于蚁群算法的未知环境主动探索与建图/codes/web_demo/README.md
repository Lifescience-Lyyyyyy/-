# 交互式蚁群算法可视化工具 (Interactive ACO Visualizer)

这是一个基于Web的全栈项目，旨在以交互式的方式演示两种核心的蚁群优化（Ant Colony Optimization, ACO）算法：**路径规划**和**自主探索构图**。用户可以通过一个直观的Web界面调整参数、生成或手绘地图，并实时观察算法的运行过程和结果。

  
---

## ✨ 功能特性

- **双模式演示**:
  - **路径规划 (Path Planning)**: 在给定的、完全已知的地图中，利用蚁群算法寻找从起点到终点的最优路径。
  - **自主构图 (Exploration)**: 模拟一个机器人在未知环境中，仅依靠有限范围的传感器，逐步探索并构建出整个环境的地图。

- **高度交互性**:
  - **实时参数调整**: 用户可以在网页侧边栏实时调整ACO的核心参数，如 Alpha（信息素影响）、Beta（启发式影响）、信息素蒸发率等，并立即在新的模拟中看到效果。
  - **多种地图生成方式**:
    - **程序生成**: 可自定义地图尺寸、障碍物比例，并能生成“随机地图”或具有挑战性的“欺骗性走廊”地图。
    - **手绘地图**: 在“自主构图”模式下，用户可以直接在网页上绘制自定义的障碍物布局。

- **实时可视化**:
  - **路径规划**: 实时展示每一代蚂蚁的探索路径、信息素在地图上的浓度分布与变化，以及最终找到的最优路径（若ACO失败则回退到A*算法并以不同颜色标出）。
  - **自主构图**: 实时显示机器人的移动轨迹、其“已知地图”的构建过程、以及作为决策目标的“边界点”（Frontiers）。

- **双栏视图**:
  - 左侧为参数控制和设置面板。
  - 右侧主区域采用分栏布局，同时展示动态的可视化画布和详细的算法/参数文字解释，方便用户对照学习。

- **健壮的后端**:
  - 使用 FastAPI 构建的异步WebSocket后端，能够高效处理与前端的实时通信。
  - 包含对用户输入的稳健性处理和清晰的日志输出。

---

## 🛠️ 技术栈

- **后端**:
  - **Python 3**: 主要编程语言。
  - **FastAPI**: 高性能的Web框架，用于构建API和WebSocket服务。
  - **Uvicorn**: ASGI服务器，用于运行FastAPI应用。
  - **NumPy**: 用于高效的地图（网格）数据处理和计算。

- **前端**:
  - **原生 HTML, CSS, JavaScript (ES6)**: 无任何前端框架，轻量且易于理解。
  - **WebSocket API**: 用于与后端进行实时、双向的数据通信。
  - **Canvas API**: 用于绘制地图、路径、信息素等所有可视化元素。

- **算法核心**:
  - **蚁群优化 (ACO)**: 用于路径规划和自主构图的探索决策。
  - **A* 算法**: 作为路径规划失败时的回退方案，以及在自主构图中用于计算机器人到边界点的路径。
  - **Bresenham's Line Algorithm**: 用于模拟机器人的视线遮挡。

---

## 🚀 如何运行

本项目已配置为开箱即用，尤其是在Windows环境下。

### 先决条件
- 已安装 [Python](https://www.python.org/downloads/) (建议版本 3.7+)，并已将其添加到系统的 `PATH` 环境变量中。

### 安装依赖

项目所需的Python库已在 `requirements.txt` 文件中列出。在项目根目录下打开命令行或终端，运行以下命令进行安装：

```bash
pip install -r requirements.txt
```
*(注：如果项目中没有 `requirements.txt`，用户需要手动安装 `fastapi`, `uvicorn`, `websockets`, `numpy`)*

### 启动程序

1.  **对于Windows用户**:
    - 直接双击运行项目根目录下的 `run_windows.bat` 文件。
    - 它会自动启动后端服务器，并用你的默认浏览器打开 `http://127.0.0.1:8000`。

2.  **对于macOS / Linux用户 (或手动启动)**:
    - 打开终端，导航到项目的 `backend` 目录。
    - 运行以下命令来启动服务器：
      ```bash
      uvicorn main:app --host 127.0.0.1 --port 8000 --reload
      ```
    - 手动在浏览器中访问 `http://127.0.0.1:8000`。

服务器启动后，你就可以在网页上与程序进行交互了。

---

## 📁 项目结构

```
.
├── backend/                  # 后端代码目录
│   ├── logic/                # 核心算法逻辑
│   │   ├── __init__.py
│   │   ├── a_star.py         # A* 算法实现
│   │   ├── aco.py            # 蚁群优化与自主探索引擎
│   │   └── environment.py    # 地图环境生成
│   ├── main.py               # FastAPI主应用和WebSocket接口
│   └── requirements.txt      # Python依赖
├── frontend/ (或项目根目录)
│   └── index.html            # 前端所有HTML, CSS, JavaScript代码
└── run_windows.bat           # Windows一键启动脚本
└── README.md                 # 本文件
```

---

## 📜 核心算法简述

### 路径规划中的ACO
1.  **初始化**: 在地图上均匀分布少量信息素。
2.  **蚂蚁出发**: 在每次迭代中，从起点释放一群蚂蚁。
3.  **路径选择**: 每个蚂蚁在每个决策点，根据脚下路径的**信息素浓度**（历史经验）和**启发式信息**（距离终点的远近）的加权组合，概率性地选择下一步。
4.  **信息素更新**: 完成一次迭代后，所有成功到达终点的蚂蚁会根据其路径的优劣（通常是长度的倒数）在走过的路径上留下信息素。同时，地图上所有的信息素都会有一定比例的**蒸发**。
5.  **正反馈**: 较短的路径会获得更多的信息素积累，吸引更多的蚂蚁，形成正反馈，最终收敛到最优或次优路径。

### 自主构图中的探索策略
1.  **感知 (Sense)**: 机器人使用模拟的传感器感知周围环境，更新其内部的“已知地图”。视线会被真实地图中的障碍物遮挡。
2.  **识别边界 (Find Frontiers)**: 机器人在其已知地图中，寻找所有“已知区域”与“未知区域”的交界处，这些点被称为“边界点”。
3.  **决策 (Choose Target)**: 机器人使用一种简化的、以“探索”为目的的决策系统（受ACO启发），评估前往各个边界点的“价值”（例如，距离远近、信息素等），选择一个作为下一个目标。
4.  **移动 (Move)**: 机器人使用A*算法，在**当前已知地图**的基础上，规划一条前往选定目标的路径，并沿路径移动。
5.  **循环**: 重复以上步骤，直到整个地图被探索完毕或达到最大步数限制。